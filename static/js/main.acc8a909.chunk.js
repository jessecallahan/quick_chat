(this.webpackJsonpquick_chat=this.webpackJsonpquick_chat||[]).push([[0],{388:function(e,t,n){},420:function(e,t,n){},421:function(e,t,n){"use strict";n.r(t);var a=n(144),r=n(217),c=n(218),s=n(223),i=n(222),o=n(3),l=n.n(o),j=n(32),h=n.n(j),u=n(52),d=n(9),m=n(6),b=(n(89),n(2));var p=function(e){var t=Object(d.useFirestore)();function n(){return(n=Object(u.a)(h.a.mark((function n(a){var r;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a.preventDefault(),r=m.a.auth().currentUser,n.next=4,t.collection(e.pathname).add({name:r.displayName,content:a.target.content.value,user_id:r.uid,createdAt:t.FieldValue.serverTimestamp()});case 4:a.target.content.value="";case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(b.jsx)(l.a.Fragment,{children:Object(b.jsxs)("form",{onSubmit:function(e){return n.apply(this,arguments)},children:[Object(b.jsx)("div",{children:Object(b.jsx)("textarea",{rows:"12",cols:"50",name:"content",placeholder:"Type Chat Here..."})}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",children:"Send"})})]})})};var O=function(e){return Object(b.jsxs)(l.a.Fragment,{children:[Object(b.jsxs)("h3",{children:[e.name," = ",e.content]}),Object(b.jsx)("hr",{})]})},x=n(93);n(216);var f=function(e){Object(d.useFirestoreConnect)([{collection:e.pathname,orderBy:["createdAt","desc"]}]);var t=e.pathname,n=Object(x.b)((function(e){return e.firestore.ordered[t]}));return Object(d.isLoaded)(n)?Object(b.jsxs)(l.a.Fragment,{children:[Object(b.jsx)("hr",{}),n.map((function(e){return Object(b.jsx)(O,{name:e.name,content:e.content,user_id:e.user_id,id:e.id},e.id)}))]}):Object(b.jsx)(l.a.Fragment,{children:Object(b.jsx)("h3",{children:"Loading..."})})},g=n(23);var v=function(e){var t=Object(d.useFirestore)(),n=Object(o.useState)([]),a=Object(g.a)(n,2),r=a[0],c=a[1];return Object(o.useEffect)((function(){t.collection(e.pathname).doc("friendsList").onSnapshot((function(e){e.exists?c(e.data().names):console.log("No such document!")}))}),[t,e]),Object(b.jsx)(l.a.Fragment,{children:Object(b.jsxs)("div",{className:"friendsList",children:[Object(b.jsx)("h3",{children:"Friends In This Chat:"}),r.map((function(e,t){return Object(b.jsx)("div",{children:e},t)}))]})})};var U=function(e){var t=Object(d.useFirestore)();return Object(b.jsx)(l.a.Fragment,{children:Object(b.jsx)("div",{children:Object(b.jsx)("button",{onClick:function(){m.a.auth().currentUser&&(!function(){var n=m.a.auth().currentUser,a=t.collection(e.pathname).doc("friendsList");a.get().then(function(){var e=Object(u.a)(h.a.mark((function e(t){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.exists){e.next=6;break}return r=t.data().names.filter((function(e){return e!==n.displayName})),e.next=4,a.update({names:r});case 4:e.next=7;break;case 6:console.log("No such document!");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log("Error getting document:",e)}))}(),m.a.auth().signOut().then((function(){})).catch((function(e){console.log(e.message)})),e.setCurrentUser(null))},children:"Sign out"})})})};var N=function(e){return Object(b.jsx)("div",{children:e.error})};function y(e){var t=Object(d.useFirestore)(),n=Object(o.useState)(!1),a=Object(g.a)(n,2),r=a[0],c=a[1],s="";return r&&(s=Object(b.jsx)(N,{error:r})),Object(b.jsxs)(l.a.Fragment,{children:[Object(b.jsx)("h1",{children:"Type Your Name and Go!"}),Object(b.jsxs)("form",{onSubmit:function(n){n.preventDefault();var a,r=n.target.displayName.value;m.a.auth().signInAnonymously().then((function(t){return e.setCurrentUser(t.user.uid),t.user.updateProfile({displayName:r})})).catch((function(e){var t=e.message;c(t)})),a=r,t.collection(e.pathname).doc("friendsList").update({names:m.a.firestore.FieldValue.arrayUnion(a)})},children:[Object(b.jsx)("input",{type:"text",name:"displayName",placeholder:"name"}),Object(b.jsx)("button",{type:"submit",children:"Enter"})]}),s]})}n(90);var w=n(34);var k=function(e){var t=function(){var e=Object(u.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.writeText(t);case 3:console.log("Copied!"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("Failed to copy!");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsx)(l.a.Fragment,{children:Object(b.jsxs)("div",{className:"bottom_left",children:["https://jessecallahan.github.io/quick_chat/#"+e.pathname,Object(b.jsx)("button",{onClick:function(){return t("https://jessecallahan.github.io/quick_chat/#"+e.pathname)},children:"Click here to copy"})]})})};var F=function(e){var t=Object(d.useFirestore)(),n=Object(o.useState)(""),a=Object(g.a)(n,2),r=a[0],c=a[1];return Object(o.useEffect)((function(){t.collection(e.pathname).doc("friendsList").get().then((function(e){e.exists?c(e.data().chatRoomName):console.log("No such document!")})).catch((function(e){console.log("Error getting document:",e)}))}),[t,e]),Object(b.jsx)(l.a.Fragment,{children:Object(b.jsxs)("div",{children:["You're invited to ",r,"'s Chat Room"]})})};var C=function(e){var t=Object(d.useFirestore)();function n(n){t.collection(n).get().then((function(e){e.docs.forEach((function(e){"friendsList"!==e.id&&e.ref.delete()}))})),t.collection(e.pathname).doc("friendsList").update({names:[m.a.auth().currentUser.displayName]})}return Object(b.jsx)("div",{children:Object(b.jsx)("button",{className:"delete button",onClick:function(){!0===window.confirm("Are you sure you want to delete the contents in this Chat Room?")&&n(e.pathname)},children:"Click to Clear"})})};var S=function(e){var t=Object(w.g)();console.log(t);var n=null,a=null,r=null,c=null,s=m.a.auth().currentUser;return s&&e.currentUser?(n=Object(b.jsx)(p,{pathname:t.pathname}),a=Object(b.jsx)(l.a.Fragment,{children:Object(b.jsx)("div",{className:"wrapper",children:Object(b.jsx)("div",{className:"bottom_right",children:Object(b.jsx)(U,{setCurrentUser:e.setCurrentUser,pathname:t.pathname})})})}),r=Object(b.jsx)(v,{pathname:t.pathname}),c=Object(b.jsx)(f,{pathname:t.pathname}),s.uid===e.mainUser&&(a=Object(b.jsxs)(l.a.Fragment,{children:[Object(b.jsx)(k,{pathname:t.pathname}),Object(b.jsx)("div",{className:"wrapper",children:Object(b.jsxs)("div",{className:"bottom_right",children:[Object(b.jsx)(U,{setCurrentUser:e.setCurrentUser,pathname:t.pathname}),Object(b.jsx)(C,{pathname:t.pathname})]})})]}))):n=Object(b.jsx)(l.a.Fragment,{children:Object(b.jsxs)("div",{className:"center",children:[Object(b.jsx)(F,{pathname:t.pathname}),Object(b.jsx)(y,{setCurrentUser:e.setCurrentUser,pathname:t.pathname})]})}),Object(b.jsxs)("div",{className:"parent",children:[Object(b.jsxs)("div",{className:"div1",children:[n,r]}),Object(b.jsx)("div",{className:"div2",children:c}),a]})},_=n(14),L=n.p+"static/media/title.3aa26e81.jpg",P=n.p+"static/media/grape.e887e9c9.jpg",R=n.p+"static/media/orange.43ddd268.jpg",I=n.p+"static/media/lime.fe350886.jpg";var A=function(e){var t=e.known_pathGrape(),n=e.known_pathOrange(),a=e.known_pathLime(),r=m.a.auth().currentUser,c=Object(w.g)();return console.log(c),m.a.auth().currentUser&&e.currentUser?e.mainUser===r.uid?Object(b.jsx)(l.a.Fragment,{children:Object(b.jsx)("div",{className:"header",children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"column",children:Object(b.jsx)(_.b,{to:"/",children:Object(b.jsx)("img",{src:L,className:"title_photo",alt:"title"})})}),Object(b.jsx)("div",{className:"column",children:Object(b.jsx)(_.b,{to:{pathname:t},children:Object(b.jsx)("img",{src:P,className:"photo",alt:"title"})})}),Object(b.jsx)("div",{className:"column",children:Object(b.jsx)(_.b,{to:{pathname:n},children:Object(b.jsx)("img",{src:R,className:"photo",alt:"title"})})}),Object(b.jsx)("div",{className:"column",children:Object(b.jsx)(_.b,{to:{pathname:a},children:Object(b.jsx)("img",{src:I,className:"photo",alt:"title"})})})]})})}):Object(b.jsx)(l.a.Fragment,{children:Object(b.jsx)("div",{className:"parent1",children:Object(b.jsx)("div",{className:"row",children:Object(b.jsx)("div",{className:"column",children:Object(b.jsx)(_.b,{to:"/",children:Object(b.jsx)("img",{src:L,onClick:function(){return e.setHome(!0)},className:"title_photo",alt:"title"})})})})})}):"/"===c.pathname||e.home?Object(b.jsxs)(l.a.Fragment,{children:[" ",Object(b.jsx)("div",{className:"header",children:Object(b.jsx)("div",{className:"row",children:Object(b.jsx)("div",{className:"column"})})}),Object(b.jsx)("br",{}),Object(b.jsx)("br",{})]}):Object(b.jsx)(l.a.Fragment,{children:Object(b.jsx)("div",{className:"parent1",children:Object(b.jsx)("div",{className:"row",children:Object(b.jsx)("div",{className:"column",children:Object(b.jsx)(_.b,{to:"/",children:Object(b.jsx)("img",{src:L,onClick:function(){return e.setHome(!0)},className:"title_photo",alt:"title"})})})})})})};var H=function(e){var t=Object(d.useFirestore)(),n=Object(o.useState)(!1),a=Object(g.a)(n,2),r=a[0],c=a[1],s=Object(o.useState)(!1),i=Object(g.a)(s,2),j=i[0],h=i[1],u="";return j&&(u=Object(b.jsx)(N,{error:j})),!1===r?Object(b.jsx)(l.a.Fragment,{children:Object(b.jsxs)("div",{className:"center",children:[Object(b.jsx)("h1",{children:"Sign In"}),Object(b.jsxs)("form",{onSubmit:function(n){n.preventDefault();var a=n.target.signinEmail.value,r=n.target.signinPassword.value;m.a.auth().signInWithEmailAndPassword(a,r).then((function(){e.mainUserSetter(m.a.auth().currentUser.uid),e.setCurrentUser(m.a.auth().currentUser.uid),function(n){var a=t.collection(e.known_pathGrape()).doc("friendsList"),r=t.collection(e.known_pathOrange()).doc("friendsList"),c=t.collection(e.known_pathLime()).doc("friendsList");a.update({chatRoomName:n,names:m.a.firestore.FieldValue.arrayUnion(n)}),r.update({chatRoomName:n,names:m.a.firestore.FieldValue.arrayUnion(n)}),c.update({chatRoomName:n,names:m.a.firestore.FieldValue.arrayUnion(n)})}(m.a.auth().currentUser.displayName),c(!0)})).catch((function(e){h(e.message)}))},children:[Object(b.jsx)("input",{type:"email",name:"signinEmail",placeholder:"email"}),Object(b.jsx)("input",{type:"password",name:"signinPassword",placeholder:"Password"}),Object(b.jsx)("button",{type:"submit",children:"Sign in"})]}),u]})}):Object(b.jsx)(w.a,{to:{pathname:e.known_pathGrape()}})};var E=function(){var e=Object(d.useFirestore)(),t=Object(o.useState)(!1),n=Object(g.a)(t,2),a=n[0],r=n[1],c=Object(o.useState)(!1),s=Object(g.a)(c,2),i=s[0],j=s[1],h="";return i&&(h=Object(b.jsx)(N,{error:i})),!1===a?Object(b.jsx)(l.a.Fragment,{children:Object(b.jsxs)("div",{className:"center",children:[Object(b.jsx)("h1",{children:"Sign up"}),Object(b.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n=t.target.email.value,a=t.target.password.value,c=t.target.displayName.value;m.a.auth().createUserWithEmailAndPassword(n,a).then((function(t){return function(t){var n={chatRoomName:"",names:[]};e.collection(t+"_grapeRoom").doc("friendsList").set(n),e.collection(t+"_orangeRoom").doc("friendsList").set(n),e.collection(t+"_limeRoom").doc("friendsList").set(n)}(t.user.uid),r(!0),t.user.updateProfile({displayName:c})})).catch((function(e){console.log(e.message);var t=e.message;j(t)}))},children:[Object(b.jsx)("input",{type:"displayName",name:"displayName",placeholder:"displayName"}),Object(b.jsx)("input",{type:"text",name:"email",placeholder:"email"}),Object(b.jsx)("input",{type:"password",name:"password",placeholder:"Password"}),Object(b.jsx)("button",{type:"submit",children:"Sign up"})]}),h]})}):Object(b.jsx)(w.a,{to:{pathname:"/signin"}})};var G=function(e){return Object(b.jsx)(l.a.Fragment,{children:Object(b.jsxs)("div",{className:"center",children:[Object(b.jsx)("h1",{children:"Welcome to"}),Object(b.jsx)("img",{src:L,alt:"title"}),Object(b.jsx)("h2",{children:"an application where you can chat quickly"}),Object(b.jsxs)("h4",{children:["Already have an account?\xa0",Object(b.jsx)(_.b,{onClick:function(){return e.setHome(!1)},to:"/signin",children:"Log In Here"}),"\xa0-- Need an account?\xa0",Object(b.jsx)(_.b,{onClick:function(){return e.setHome(!1)},to:"/signup",children:"Sign Up Here"})]}),Object(b.jsx)("p",{children:Object(b.jsxs)("i",{children:["for those interested the ",Object(b.jsx)("a",{href:"https://github.com/jessecallahan/quick_chat",children:"github"})]})})]})})},q=(n(388),function(e){Object(s.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).handleSignIn=function(e){a.setState({mainUser:e})},a.handleCurrentUser=function(e){a.setState({currentUser:e})},a.createGrapePath=function(){return a.state.mainUser+"_grapeRoom"},a.createOrangePath=function(){return a.state.mainUser+"_orangeRoom"},a.createLimePath=function(){return a.state.mainUser+"_limeRoom"},a.handleSetHome=function(e){a.setState({homePage:e})},a.handleFriendsList=function(e){a.setState({friendsList:e})},a.state={mainUser:null,currentUser:null,homePage:null},a}return Object(c.a)(n,[{key:"render",value:function(){return Object(b.jsxs)(_.a,{children:[Object(b.jsx)(A,{home:this.state.homePage,setHome:this.handleSetHome,known_pathGrape:this.createGrapePath,known_pathOrange:this.createOrangePath,known_pathLime:this.createLimePath,mainUser:this.state.mainUser,currentUser:this.state.currentUser}),Object(b.jsxs)(w.d,{children:[Object(b.jsx)(w.b,{exact:!0,path:"/",children:Object(b.jsx)(G,{setHome:this.handleSetHome})}),Object(b.jsx)(w.b,{path:"/signin",children:Object(b.jsx)(H,{mainUserSetter:this.handleSignIn,known_pathGrape:this.createGrapePath,known_pathOrange:this.createOrangePath,known_pathLime:this.createLimePath,mainUser:this.state.mainUser,setCurrentUser:this.handleCurrentUser})}),Object(b.jsx)(w.b,{path:"/signup",children:Object(b.jsx)(E,{})}),Object(b.jsx)(w.b,{path:this.createGrapePath,children:Object(b.jsx)(S,{mainUser:this.state.mainUser,currentUser:this.state.currentUser,setCurrentUser:this.handleCurrentUser})}),Object(b.jsx)(w.b,{path:this.createOrangePath,children:Object(b.jsx)(S,{mainUser:this.state.mainUser,currentUser:this.state.currentUser,setCurrentUser:this.handleCurrentUser})}),Object(b.jsx)(w.b,{path:this.createLimePath,children:Object(b.jsx)(S,{mainUser:this.state.mainUser,currentUser:this.state.currentUser,setCurrentUser:this.handleCurrentUser})})]})]})}}]),n}(l.a.Component)),V=Object(d.withFirestore)(q),D=n(91),T=n.n(D),B=n(53),W=n(92),z=Object(B.b)({firestore:W.firestoreReducer});m.a.initializeApp({apiKey:"AIzaSyC9TU3VLBAJK9zA0DxhSPcLAdnWR8xNFV4",authDomain:"quickchat-771e9.firebaseapp.com",projectId:"quickchat-771e9",storageBucket:"quickchat-771e9.appspot.com",messagingSenderId:"437031703283",appId:"1:437031703283:web:987f3078a1ac49bd0d5d86"}),m.a.firestore();var J=m.a,K=(n(420),n.p,Object(B.c)(z)),Y={firebase:J,config:{userProfile:"users"},dispatch:K.dispatch,createFirestoreInstance:W.createFirestoreInstance};T.a.render(Object(b.jsx)(x.a,{store:K,children:Object(b.jsx)(d.ReactReduxFirebaseProvider,Object(a.a)(Object(a.a)({},Y),{},{children:Object(b.jsx)(V,{})}))}),document.getElementById("root"))}},[[421,1,2]]]);
//# sourceMappingURL=main.acc8a909.chunk.js.map